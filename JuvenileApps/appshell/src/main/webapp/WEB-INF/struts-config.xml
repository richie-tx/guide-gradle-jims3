<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN"
          "http://struts.apache.org/dtds/struts-config_1_3.dtd">

<struts-config>


	<!-- Form Beans -->
	<form-beans>
		<form-bean name="loginForm" type="ui.security.authentication.form.LoginForm" />
		<form-bean name="featuresForm" type="ui.appshell.action.FeaturesForm" />
 	</form-beans>

	<!-- ========== Exception Definitions =================================== -->
  	<global-exceptions>
  	</global-exceptions>

	<!-- Global Forwards -->

	<!-- Action Mappings -->
	<global-forwards>
		<forward name="security" redirect="true" path="/security.war">
			<display-name>security</display-name>
		</forward>
	</global-forwards>
	<action-mappings>
	<action path="/globalBack" forward="/jsp/back.jsp"/>
<!-- ========== MANAGE NAVIGATION =================================== -->				
		<!-- Submit Login -->
		<action path="/submitLogin" type="ui.appshell.action.LoginAction" 
			name="loginForm" input="jsp/login.jsp" scope="request">
			<forward name="error" path="jsp/login.jsp" />
			<forward name="success" path="jsp/dnavigationFrameset.jsp"/>
		</action>
		
		<!-- Display Heading -->    
    	<action    path="/displayHeader" forward="jsp/dheading.jsp" />
    	
		<!-- Display Navigation Header -->    
    	<action path="/displayNavigationHeader" forward="jsp/dnavigationheader.jsp" />    	
    	
    	<!-- Display Features -->
    	<action    path="/displayFeatures"
        	type="ui.appshell.action.DisplayFeaturesAction"
	        name="featuresForm"
            scope="request">
      	 	<!--<forward name="displayNavigationBody"     path="jsp/navigationBody.jsp"/> -->
      	 	<forward name="displayNavigationBody"     path="jsp/dnavigationmenu.jsp"/>

    	</action>
    	
    	<!-- Display MAIN content -->
		<action	path="/displayMainContent" forward="jsp/mainMenu.jsp" name="loginForm" />    
    	
    	<!-- Display Logout -->    
    	<action path="/displayLogout"
        	type="ui.appshell.action.DisplayLogoutAction">
      		<forward name="displayLogin" path="jsp/login.jsp"/>
    	</action>
		<action path="/redirecttoEntra"
        	type="ui.security.authentication.action.RedirecttoEntraAction">
      		<forward name="redirect" path="jsp/redirecttoEntra.jsp"/>
    	</action>

 	    <action path="/displayFeaturePopup" type="ui.appshell.action.DisplayFeaturePopupAction" name="displayFeaturePopup" scope="request" parameter="reqCode" validate="false">
    		<forward name="displayFeaturePopupBody" path="jsp/dfeaturePopup.jsp">
    		</forward>
    	</action>
    	<action path="/toModule" type="org.apache.struts.actions.SwitchAction">
    	</action>
    	
    	<!-- ========== LOGIN-LOGOUT =================================== -->
	<action path="/handleValidateUserAction" type="ui.security.authentication.action.HandleValidateUserAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="genericOfficerSuccess" path="/jsp/loginGenericOfficer.jsp">
			</forward>
			<forward name="genericSPSuccess" path="/jsp/loginGenericServiceProvider.jsp">
			</forward>
			<forward name="nonGenericSuccess" path="/jsp/loginJIMS2.jsp">
			</forward>
			<forward name="jims2Success" path="/jsp/main.jsp">
			</forward>
			<forward name="failure" path="/jsp/login.jsp">
			</forward>
			<forward name="cancel" path="/jsp/login.jsp">
			</forward>			
			<forward name="reset" path="/jsp/login.jsp">
			</forward>
			<forward name="updatePassword" path="/displayUpdatePasswordAction.do">
			</forward>			
		</action>
		
		<action path="/displayValidateServiceProviderAction" type="ui.security.authentication.action.DisplayValidateServiceProviderAction" parameter="submitAction" name="loginForm" scope="session">			
			<forward name="genericSPSuccess" path="/jsp/loginJIMS2.jsp">
			</forward>			
			<forward name="failure" path="/jsp/loginGenericServiceProvider.jsp">
			</forward>
			<forward name="cancel" path="/jsp/login.jsp">
			</forward>			
		</action>
		
		<action path="/handleValidateOfficerAction" type="ui.security.authentication.action.HandleValidateOfficerAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="validSuccess" path="/jsp/loginJIMS2.jsp">
			</forward>
			<forward name="createOfficerSuccess" path="/jsp/loginOfficerCreate.jsp">
			</forward>
			<forward name="failure" path="/jsp/loginGenericOfficer.jsp">
			</forward>
			<forward name="cancel" path="/jsp/login.jsp">
			</forward>
			<forward name="reset" path="/jsp/loginGenericOfficer.jsp">
			</forward>
		</action>
		
		<action path="/displayCreateJIMS2AccountSummaryAction" type="ui.security.authentication.action.DisplayCreateJIMS2AccountSummaryAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="success" path="/jsp/loginJIMS2AccountCreateSummary.jsp">
			</forward>
			<forward name="failure" path="/jsp/loginJIMS2.jsp">
			</forward>
			<forward name="backToSPValidation" path="/jsp/loginGenericServiceProvider.jsp">
			</forward>
			<forward name="backToLogin" path="/jsp/login.jsp">
			</forward>			
			<forward name="back" path="/jsp/loginGenericOfficer.jsp">
			</forward>
			<forward name="cancel" path="/jsp/login.jsp">
			</forward>
			<forward name="reset" path="/jsp/loginJIMS2.jsp">
			</forward>
		</action>
		
		<action path="/displayCreateOfficerProfileSummaryAction" type="ui.security.authentication.action.DisplayCreateOfficerProfileSummaryAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="success" path="/jsp/loginOfficerCreateSummary.jsp">
			</forward>
			
			<forward name="failure" path="/jsp/loginOfficerCreate.jsp">
			</forward>
			<forward name="back" path="/jsp/loginGenericOfficer.jsp">
			</forward>
			
			<forward name="reset" path="/jsp/loginJIMS2.jsp">
			</forward>
			<forward name="cancel" path="/jsp/loginGenericOfficer.jsp">
			</forward>
		</action>
		<action path="/displayLoginAction" type="ui.security.authentication.action.DisplayLoginAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="success" path="/jsp/login.jsp">
			</forward>
					
		</action>
		
		
		<action path="/handleValidateMFA" type="ui.security.authentication.action.HandleValidateMFAAction" parameter="submitAction" name="loginForm" scope="session">
			<!-- <forward name="success" path="/jsp/main.jsp"></forward> -->
			<forward name="failure" path="/jsp/MFAloginErrors.jsp"></forward>
			<forward name="jims2Success" path="/jsp/main.jsp"></forward>
			<forward name="redirect" path="/redirecttoEntra.do"></forward>
					
		</action>

			<action path="/displayUpdatePasswordAction" type="ui.security.authentication.action.DisplayUpdatePasswordAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="success" path="/jsp/loginPasswordUpdate.jsp">
			</forward>
					
		</action>
		<action path="/submitCreateJIMS2AccountAction" type="ui.security.authentication.action.SubmitCreateJIMS2AccountAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="success" path="/jsp/loginJIMS2AccountCreateSummary.jsp">
			</forward>
			<forward name="failure" path="/jsp/loginJIMS2AccountCreateSummary.jsp"/>			
			<forward name="cancel" path="/jsp/login.jsp">
			</forward>
			<forward name="back" path="/jsp/loginJIMS2.jsp">			
			</forward>
			<forward name="backtologin" path="/displayLoginAction.do"/>
		</action>
		<action path="/submitCreateOfficerProfileAction" type="ui.security.authentication.action.SubmitCreateOfficerProfileAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="success" path="/jsp/loginOfficerCreateSummary.jsp">
			</forward>			
			<forward name="cancel" path="/jsp/login.jsp">
			</forward>
			<forward name="back" path="/jsp/loginOfficerCreate.jsp">			
			</forward>
			<forward name="failure" path="/jsp/loginOfficerCreate.jsp"/>
			<forward name="backtologin" path="/displayLoginAction.do"/>
		</action>   
		<action path="/submitUpdatePasswordAction" type="ui.security.authentication.action.SubmitUpdatePasswordAction" parameter="submitAction" name="loginForm" scope="session">
			<forward name="success" path="/jsp/login.jsp"></forward>				
<!--  			<forward name="updateSuccess" path="/jsp/mainMenu.jsp"></forward>	-->
			<forward name="updateSuccess" path="/jsp/loginPasswordUpdateConfirm.jsp"/>							
			<forward name="failure" path="/jsp/loginPasswordUpdate.jsp"></forward>	
			<forward name="back" path="/jsp/login.jsp"/>
			<forward name="reset" path="/jsp/loginPasswordUpdate.jsp"></forward>
			<forward name="cancel" path="/jsp/mainMenu.jsp"></forward>
			<forward name="backModify" path="/jsp/login.jsp"/>
		</action>   		
    	<action name="loginForm" path="/acceptTask" type="ui.task.action.AcceptTaskAction"></action>
        <action	name="loginForm" path="/closeTaskAction" scope="session" type="ui.task.action.CloseTaskAction" parameter="submitAction">
      		<forward name="success" path="jsp/mainMenu.jsp"/>
    	</action>
    	 <action	name="loginForm" path="/closeNotificationAction" scope="session" type="ui.notification.action.CloseNotificationAction" parameter="submitAction">
      		<forward name="success" path="jsp/mainMenu.jsp"/>
    	</action>
   
    	<action	name="loginForm" path="/displayHome" scope="session" type="ui.common.action.DisplayHomeAction" parameter="submitAction">
      		<forward name="success" path="jsp/mainMenu.jsp"/>
    	</action>
    	<action	name="loginForm" path="/displayHomeSecurity" scope="session" type="ui.common.action.DisplayHomeAction" parameter="submitAction">
      		<forward name="success" path="jsp/mainMenuSecurity.jsp"/>
    	</action>
    	<action	name="loginForm" path="/displayNoticeMessage" scope="session" type="ui.notification.action.DisplayNoticeMessageTaskAction" parameter="submitAction">
      		<forward name="success" path="jsp/notificationMessage.jsp"/>
    	</action> 
    	 	
    	</action-mappings>

	
	<controller processorClass="mojo.struts.RequestProcessor">
		<set-property property="inputForward" value="true"/>
		
	</controller>
	
	
	<!-- Message Resources -->
	<message-resources parameter="ApplicationResources_Appshell"/>
	
<!--	<message-resources parameter="ui.struts.resources.ApplicationResources"/>-->

	<!-- ========== Plug Ins Configuration ================================== -->
  <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    <set-property
        property="pathnames"
        value="/WEB-INF/validator-rules.xml,
               /WEB-INF/validation.xml"/>
  </plug-in>
    
  <!-- 
  	Allows for classes to be initialized at startup.
  	Properties:
  		runAtStartup - list of classes to initialized seperated by the default
  			delimiter (,).
  		delimiter - set a specified delimiter (defaults to ',') [Optional]
  	
  	<set-property property="runAtStartup" value="<fully qualified java [class2][,] [class3][,] [class4]" />
  	-->
  <plug-in className="mojo.struts.ApplicationStartupPlugIn">
	  <set-property property="runAtStartup" value="pd.km.init.ContactInitializer" />
  </plug-in>    

</struts-config>
